import{a as j}from"./with-props-DRo28uWY.js";import{a as r,n as s,t as w,v as b,w as v}from"./chunk-IR6S3I6Y-Cb60dFvd.js";import{u as k,d as N,e as y,f as C,g as P,P as M,F as L,h as S,s as F,i as I,o as E,b as m}from"./Portal-nraEDXLe.js";import{c as f}from"./clsx-B-dksMZM.js";import"./index-BffmUMPP.js";function A({label:l,children:i,position:c,...d}){const[o,a]=r.useState(!1),p=k(),{refs:u,floatingStyles:x,context:h}=N({nodeId:p,placement:c,middleware:[F(),I({fallbackAxisSideDirection:"end"}),E({mainAxis:0,crossAxis:6})],open:o,onOpenChange:a,whileElementsMounted:S}),{isMounted:e}=y(h,{duration:150,initial:{opacity:0,transform:"scale(0.8)"}}),{getFloatingProps:t,getReferenceProps:n}=C([P(h,{enabled:!0})]);return s.jsxs(s.Fragment,{children:[r.cloneElement(r.Children.only(l),n({ref:u.setReference,tabIndex:0,role:"button","aria-expanded":o})),s.jsx(M,{disabled:!e,children:s.jsx(L,{"data-testid":"vs-popover-shadow",onClick:()=>a(!1),autoFocus:!0,children:s.jsx("div",{role:"region",ref:u.setFloating,style:x,children:s.jsx("div",{...t({...d}),children:i})})})})]})}function B(l){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",...l,children:s.jsx("path",{d:"M12 5v14M5 12h14"})})}function T(l){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",...l,children:s.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})}function z({}){return[{title:"털겜번역단: 게임 목록"}]}const G=j(function(){const{list:i,tags:c}=w(),[d,o]=b(),a=r.useMemo(()=>{const e=d.get("tags");return e?e.split(","):[]},[d]),p=r.useMemo(()=>{const e=[];return c.forEach(t=>{a.includes(t)||e.push(t)}),e.sort(),e},[a,c]),u=r.useCallback(e=>{o(t=>{let n=(t.get("tags")||"").split(",");return n.includes(e)||n.push(e),n=n.filter(Boolean),t.set("tags",n.join(",")),t})},[o]),x=r.useCallback(e=>{o(t=>{let n=new Set((t.get("tags")||"").split(","));return n.delete(e),n.size===0?t.delete("tags"):t.set("tags",Array.from(n).join(",")),t})},[o]),h=r.useMemo(()=>a.length?i.filter(e=>{if(!e.tags.length)return!1;const t=new Set(e.tags);for(let n=0,g=a.length;n<g;n+=1)if(!t.has(a[n]))return!1;return!0}):i,[i,a]);return s.jsxs("div",{className:"container mx-auto p-2",children:[s.jsx("h1",{className:"text-3xl pt-2 pb-4",children:"게임 목록"}),s.jsx("header",{children:s.jsxs("div",{className:"flex flex-nowrap whitespace-nowrap items-center pb-2 space-x-2 max-w-full overflow-x-auto",children:[a.map(e=>s.jsxs(m,{className:"flex items-center border-stone-100 border-1 bg-stone-200 dark:border-stone-800 dark:bg-stone-700",onClick:()=>x(e),children:[e,s.jsx(T,{className:"w-4 h-4 ml-1"})]},e)),a.length<c.length?s.jsx(A,{label:s.jsxs(m,{className:"flex items-center",children:[s.jsx(B,{className:"w-4 h-4"}),"태그 검색"]}),children:s.jsx("div",{className:"p-2 bg-stone-100 dark:bg-stone-800 rounded",children:p.map(e=>s.jsx(m,{onClick:()=>u(e),children:e},e))})}):null]})}),s.jsx("ul",{className:"flex flex-wrap space-x-2",children:h.map(e=>{var t;return s.jsxs(v,{to:e.name,className:f("p-2",e.patched?"hover:opacity-65":"pointer-events-none"),"aria-disabled":!e.patched,children:[s.jsxs("figure",{className:"relative overflow-hidden w-64 h-64 rounded-xl shadow-xl",children:[(t=e.banner_url)!=null&&t.endsWith(".mp4")?s.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:f("min-h-64 w-auto object-cover",e.patched?"":"opacity-50"),children:s.jsx("source",{src:e.banner_url,type:"video/mp4"})}):s.jsx("img",{className:f("min-h-64 w-auto object-cover",e.patched?"":"opacity-50"),src:e.banner_url,alt:e.name}),e.patched?null:s.jsx("img",{className:"absolute bottom-5 right-2",width:"85",src:"/fvn-translation/assets/sorry_wip.png",alt:"작업중"})]}),s.jsx("span",{className:"block pt-1",children:e.title})]},e.name)})})]})});export{G as default,z as meta};
