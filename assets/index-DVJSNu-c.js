import{a as g}from"./with-props-DRo28uWY.js";import{a,n as s,t as j,v as w,w as b}from"./chunk-IR6S3I6Y-Cb60dFvd.js";import{u as v,d as k,e as N,f as y,g as C,P,F as M,h as L,s as S,i as F,o as I,b as m}from"./Portal-nraEDXLe.js";import{c as E}from"./clsx-B-dksMZM.js";import"./index-BffmUMPP.js";function A({label:l,children:i,position:c,...d}){const[o,r]=a.useState(!1),p=v(),{refs:u,floatingStyles:x,context:h}=k({nodeId:p,placement:c,middleware:[S(),F({fallbackAxisSideDirection:"end"}),I({mainAxis:0,crossAxis:6})],open:o,onOpenChange:r,whileElementsMounted:L}),{isMounted:e}=N(h,{duration:150,initial:{opacity:0,transform:"scale(0.8)"}}),{getFloatingProps:t,getReferenceProps:n}=y([C(h,{enabled:!0})]);return s.jsxs(s.Fragment,{children:[a.cloneElement(a.Children.only(l),n({ref:u.setReference,tabIndex:0,role:"button","aria-expanded":o})),s.jsx(P,{disabled:!e,children:s.jsx(M,{"data-testid":"vs-popover-shadow",onClick:()=>r(!1),autoFocus:!0,children:s.jsx("div",{role:"region",ref:u.setFloating,style:x,children:s.jsx("div",{...t({...d}),children:i})})})})]})}function B(l){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",...l,children:s.jsx("path",{d:"M12 5v14M5 12h14"})})}function T(l){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",...l,children:s.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})}function z({}){return[{title:"털겜번역단: 게임 목록"}]}const G=g(function(){const{list:i,tags:c}=j(),[d,o]=w(),r=a.useMemo(()=>{const e=d.get("tags");return e?e.split(","):[]},[d]),p=a.useMemo(()=>{const e=[];return c.forEach(t=>{r.includes(t)||e.push(t)}),e.sort(),e},[r,c]),u=a.useCallback(e=>{o(t=>{let n=(t.get("tags")||"").split(",");return n.includes(e)||n.push(e),n=n.filter(Boolean),t.set("tags",n.join(",")),t})},[o]),x=a.useCallback(e=>{o(t=>{let n=new Set((t.get("tags")||"").split(","));return n.delete(e),n.size===0?t.delete("tags"):t.set("tags",Array.from(n).join(",")),t})},[o]),h=a.useMemo(()=>r.length?i.filter(e=>{if(!e.tags.length)return!1;const t=new Set(e.tags);for(let n=0,f=r.length;n<f;n+=1)if(!t.has(r[n]))return!1;return!0}):i,[i,r]);return s.jsxs("div",{className:"container mx-auto p-2",children:[s.jsx("h1",{className:"text-3xl pt-2 pb-4",children:"게임 목록"}),s.jsx("header",{children:s.jsxs("div",{className:"flex flex-nowrap whitespace-nowrap items-center pb-2 space-x-2 max-w-full overflow-x-auto",children:[r.map(e=>s.jsxs(m,{className:"flex items-center border-stone-100 border-1 bg-stone-200 dark:border-stone-800 dark:bg-stone-700",onClick:()=>x(e),children:[e,s.jsx(T,{className:"w-4 h-4 ml-1"})]},e)),r.length<c.length?s.jsx(A,{label:s.jsxs(m,{className:"flex items-center",children:[s.jsx(B,{className:"w-4 h-4"}),"태그 검색"]}),children:s.jsx("div",{className:"p-2 bg-stone-100 dark:bg-stone-800 rounded",children:p.map(e=>s.jsx(m,{onClick:()=>u(e),children:e},e))})}):null]})}),s.jsx("ul",{className:"flex flex-wrap space-x-2",children:h.map(e=>{var t;return s.jsxs(b,{to:e.name,className:E("p-2",e.patched?"hover:opacity-65":"opacity-50 pointer-events-none"),"aria-disabled":!e.patched,children:[s.jsxs("figure",{className:"relative overflow-hidden w-64 h-64 rounded-xl shadow-xl",children:[(t=e.banner_url)!=null&&t.endsWith(".mp4")?s.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"min-h-64 w-auto object-cover",children:s.jsx("source",{src:e.banner_url,type:"video/mp4"})}):s.jsx("img",{className:"min-h-64 w-auto object-cover",src:e.banner_url,alt:e.name}),e.patched?null:s.jsx("img",{className:"absolute bottom-5 right-2",width:"85",src:"/fvn-translation/assets/sorry_wip.png",alt:"작업중"})]}),s.jsx("span",{className:"block pt-1",children:e.title})]},e.name)})})]})});export{G as default,z as meta};
