import{a as g}from"./with-props-DdaL1P3I.js";import{r as a,l as s,q as j,t as b,v as w}from"./chunk-7R3XDUXW-B18EFlhY.js";import{u as k,d as v,e as N,f as C,g as y,P,F as M,h as L,s as S,i as F,o as I,b as f}from"./Portal-CsR5NBOX.js";import"./index-5j6yeP98.js";function E({label:o,children:i,position:c,...d}){const[l,n]=a.useState(!1),x=k(),{refs:u,floatingStyles:m,context:h}=v({nodeId:x,placement:c,middleware:[S(),F({fallbackAxisSideDirection:"end"}),I({mainAxis:0,crossAxis:6})],open:l,onOpenChange:n,whileElementsMounted:L}),{isMounted:e}=N(h,{duration:150,initial:{opacity:0,transform:"scale(0.8)"}}),{getFloatingProps:t,getReferenceProps:r}=C([y(h,{enabled:!0})]);return s.jsxs(s.Fragment,{children:[a.cloneElement(a.Children.only(o),r({ref:u.setReference,tabIndex:0,role:"button","aria-expanded":l})),s.jsx(P,{disabled:!e,children:s.jsx(M,{"data-testid":"vs-popover-shadow",onClick:()=>n(!1),autoFocus:!0,children:s.jsx("div",{role:"region",ref:u.setFloating,style:m,children:s.jsx("div",{...t({...d}),children:i})})})})]})}function A(o){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",...o,children:s.jsx("path",{d:"M12 5v14M5 12h14"})})}function B(o){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",...o,children:s.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})}function _({}){return[{title:"털겜번역단: 게임 목록"}]}const D=g(function(){const{list:i,tags:c}=j(),[d,l]=b(),n=a.useMemo(()=>{const e=d.get("tags");return e?e.split(","):[]},[d]),x=a.useMemo(()=>{const e=[];return c.forEach(t=>{n.includes(t)||e.push(t)}),e.sort(),e},[n,c]),u=a.useCallback(e=>{l(t=>{let r=(t.get("tags")||"").split(",");return r.includes(e)||r.push(e),r=r.filter(Boolean),t.set("tags",r.join(",")),t})},[l]),m=a.useCallback(e=>{l(t=>{let r=new Set((t.get("tags")||"").split(","));return r.delete(e),r.size===0?t.delete("tags"):t.set("tags",Array.from(r).join(",")),t})},[l]),h=a.useMemo(()=>n.length?i.filter(e=>{if(!e.tags.length)return!1;const t=new Set(e.tags);for(let r=0,p=n.length;r<p;r+=1)if(!t.has(n[r]))return!1;return!0}):i,[i,n]);return s.jsxs("div",{className:"container mx-auto p-2",children:[s.jsx("h1",{className:"text-3xl pt-2 pb-4",children:"게임 목록"}),s.jsx("header",{children:s.jsxs("div",{className:"flex items-center pb-2 space-x-2",children:[n.map(e=>s.jsxs(f,{className:"flex items-center border-slate-100 border-1 bg-slate-200 dark:border-slate-800 dark:bg-slate-700",onClick:()=>m(e),children:[e,s.jsx(B,{className:"w-4 h-4 ml-1"})]},e)),n.length<c.length?s.jsx(E,{label:s.jsxs(f,{className:"flex items-center",children:[s.jsx(A,{className:"w-4 h-4"}),"태그 검색"]}),children:s.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-800 rounded",children:x.map(e=>s.jsx(f,{onClick:()=>u(e),children:e},e))})}):null]})}),s.jsx("ul",{className:"flex flex-wrap space-x-2",children:h.map(e=>{var t;return s.jsxs(w,{to:e.name,className:"p-2 hover:opacity-65",children:[(t=e.banner_url)!=null&&t.endsWith(".mp4")?s.jsx("figure",{className:"relative overflow-hidden w-64 h-64 rounded-xl shadow-xl",children:s.jsx("video",{autoPlay:!0,loop:!0,muted:!0,className:"min-h-64 w-auto object-cover",children:s.jsx("source",{src:e.banner_url,type:"video/mp4"})})}):s.jsx("figure",{className:"bg-cover bg-center w-64 h-64 rounded-xl shadow-xl",style:{backgroundImage:`url(${e.banner_url})`}}),s.jsx("span",{className:"block pt-1",children:e.title})]},e.name)})})]})});export{D as default,_ as meta};
